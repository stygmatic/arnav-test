<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Arnav Asthana — Photography</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Tailwind for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      /* Base */
      :root { color-scheme: dark; }
      html, body { scroll-behavior:smooth; margin:0; height:100%; overflow-x:hidden; }
      body { font-family: "Times New Roman", Times, serif; background:#0a0a0a; color:#fafafa; }
      a { color: inherit; text-decoration: none; }
      button { font: inherit; color: inherit; background:none; border:0; cursor:pointer; }

      /* Scroll snap */
      section { scroll-snap-align:start; }
      .snap-container { scroll-snap-type:y mandatory; height:100vh; overflow-y:auto; scroll-padding-top:3.5rem; }

      /* Animations */
      @keyframes fadeIn { from{opacity:0} to{opacity:1} }
      @keyframes fadeUp { from{opacity:0; transform:translateY(12px)} to{opacity:1; transform:translateY(0)} }
      @keyframes fadeDown { from{opacity:0; transform:translateY(-12px)} to{opacity:1; transform:translateY(0)} }
      .fade-in{ animation:fadeIn .5s ease forwards }
      .fade-up{ animation:fadeUp .6s ease forwards }
      .fade-down{ animation:fadeDown .6s ease forwards }

      @keyframes heroImageReveal { 0%{opacity:0; transform:scale(1.08) translateY(18px); filter:blur(14px);} 55%{opacity:1; filter:blur(0);} 100%{transform:scale(1) translateY(0);} }
      @keyframes heroGlowDrift { 0%{transform:translate(-15%, -12%) scale(1.05);} 50%{transform:translate(8%, 12%) scale(1.15);} 100%{transform:translate(18%, -6%) scale(1.1);} }
      @keyframes heroCopyReveal { from{opacity:0; transform:translateY(24px); filter:blur(6px);} to{opacity:1; transform:translateY(0); filter:blur(0);} }
      @keyframes heroLetter { 0%{opacity:0; transform:translateY(24px) scale(.96); filter:blur(6px);} 60%{filter:blur(0);} 100%{opacity:1; transform:translateY(0) scale(1);} }

      .hero-scene{ position:relative; width:100%; }
      .hero-inner{ position:relative; z-index:10; text-align:center; padding-inline:1.5rem; width:min(960px, 100%); margin:0 auto; display:flex; flex-direction:column; align-items:center; }
      .hero-visual{ position:relative; width:min(88vw, 720px); aspect-ratio:16/10; margin:0 auto 2.75rem; border-radius:40px; overflow:hidden; box-shadow:0 45px 90px rgba(0,0,0,.55); background:#0f172a; isolation:isolate; }
      @media (min-width:1024px){ .hero-visual{ width:min(70vw, 800px); margin-bottom:3.5rem; border-radius:46px; } }
      .hero-image-layer{ position:absolute; inset:0; background-size:cover; background-position:center; filter:saturate(1.12); opacity:0; transform:scale(1.05); }
      .hero-image-layer.play{ animation:heroImageReveal 1.4s cubic-bezier(.22,.61,.36,1) forwards; }
      .hero-image-layer.show{ opacity:1; transform:scale(1); filter:none; }
      .hero-gradient{ position:absolute; inset:-22%; background:radial-gradient(circle at 30% 20%, rgba(45,212,191,.35), transparent 55%), radial-gradient(circle at 70% 80%, rgba(59,130,246,.28), transparent 50%); mix-blend-mode:screen; opacity:0; pointer-events:none; }
      .hero-gradient.play{ animation:heroGlowDrift 14s ease-in-out infinite alternate; opacity:.45; }
      .hero-gradient.show{ opacity:.38; }
      .hero-overlay{ position:absolute; inset:0; background:linear-gradient(140deg, rgba(0,0,0,.62), rgba(10,10,10,.8)); backdrop-filter:blur(8px); pointer-events:none; }
      .intro-heading{ color:#fff; font-weight:300; letter-spacing:-.03em; text-shadow:0 25px 60px rgba(0,0,0,.65); }
      .intro-letter{ display:inline-block; }
      .intro-letter.play{ animation:heroLetter .7s cubic-bezier(.19,1,.22,1) forwards; }
      .intro-letter.show{ opacity:1 !important; transform:none !important; filter:none !important; }
      .intro-sub{ color:#e5e5e5; max-width:40rem; margin:1rem auto 0; font-size:clamp(1rem,2vw,1.2rem); opacity:0; }
      .intro-sub.play{ animation:heroCopyReveal .9s ease forwards; animation-delay:.7s; }
      .intro-sub.show{ opacity:1; transform:none; filter:none; }
      .intro-cta{ display:inline-flex; align-items:center; gap:.45rem; padding:.5rem 0; border-bottom:1px solid rgba(226,232,240,.35); color:#f8fafc; opacity:0; transform:translateY(30px); transition:color .3s ease, border-color .3s ease; text-transform:uppercase; letter-spacing:.22em; }
      .intro-cta span{ font-size:.78rem; transition:transform .25s cubic-bezier(.19,1,.22,1); transform-origin:left center; }
      .intro-cta.play{ animation:heroCopyReveal .95s cubic-bezier(.19,1,.22,1) forwards; animation-delay:1.1s; }
      .intro-cta.show{ opacity:1; transform:none; }
      .intro-cta:hover{ color:#f1f5f9; border-bottom-color:rgba(226,232,240,.6); }
      .intro-cta:hover span{ transform:scale(1.18); }
      .intro-cta:focus-visible{ outline:2px solid rgba(94,234,212,.55); outline-offset:6px; }
      .intro-cta svg{ width:18px; height:18px; }

      .library-hero{ padding-top:4rem; padding-bottom:2.5rem; }
      @media (min-width:768px){ .library-hero{ padding-top:5rem; padding-bottom:3.5rem; } }
      .library-hero-media{ width:100%; max-width:54rem; margin-inline:auto; aspect-ratio:16/9; border-radius:28px; overflow:hidden; border:1px solid rgba(255,255,255,.08); box-shadow:0 25px 55px rgba(0,0,0,.45); background:#0f172a; position:relative; }
      .library-hero-media img{ width:100%; height:100%; object-fit:cover; display:block; transition:transform 10s ease, filter .6s ease; }
      .library-hero-media:hover img{ transform:scale(1.04); filter:saturate(1.1); }
      .library-hero-media.failed::after{ content:'Image unavailable'; position:absolute; inset:0; display:flex; align-items:center; justify-content:center; color:#94a3b8; font-size:.95rem; letter-spacing:.08em; text-transform:uppercase; background:rgba(15,23,42,.65); }
      .library-hero-content{ max-width:40rem; margin:2rem auto 0; }

      /* Hover micro-interactions */
      .btn{ transition:transform .18s ease, background-color .18s ease, color .18s ease }
      .btn:hover{ transform:scale(1.05) }
      .card{ transition:transform .22s cubic-bezier(.2,.8,.2,1), box-shadow .22s }
      .card:hover{ transform:scale(1.05) rotate(1deg); box-shadow:0 15px 40px rgba(0,0,0,.4) }

      /* Reveal-on-view */
      .reveal-seq > * .anim{ opacity:0; transform:translateY(10px) }
      .reveal-seq.revealed > * .anim{ animation: fadeUp .6s ease forwards }

      /* Gallery */
      .gallery{ display:grid; gap:1.5rem; grid-template-columns:repeat(1,minmax(0,1fr)) }
      @media (min-width:640px){ .gallery{ grid-template-columns:repeat(2,minmax(0,1fr)); } }
      @media (min-width:1024px){ .gallery{ grid-template-columns:repeat(3,minmax(0,1fr)); } }
      /* Image fallbacks */
      .img-wrap{ position:relative; background:#1a1a1a; }
      .img-wrap.failed::before{ content:'Image unavailable'; position:absolute; inset:0; display:flex; align-items:center; justify-content:center; color:#a3a3a3; font-size:.9rem; letter-spacing:.02em; background:linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.55)); }
      .img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
    </style>

    <!-- React + ReactDOM + Babel (single-file setup for GH Pages) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel" data-presets="react">
      const { useEffect, useMemo, useRef, useState } = React;

      /* --------------------------------------------------
       * Data / Manifest loader
       * -------------------------------------------------- */
      const DEFAULT_LIBS = [
        { slug: "cars",        title: "Cars",        cover: "", photos: [] },
        { slug: "sports",      title: "Sports",      cover: "", photos: [] },
        { slug: "landscapes",  title: "Landscapes",  cover: "", photos: [] },
        { slug: "abstract",    title: "Abstract",    cover: "", photos: [] },
        { slug: "scenery",     title: "Scenery",     cover: "", photos: [] },
        { slug: "client-work", title: "Client Work", cover: "", photos: [] },
      ];

      const CDN_PLACEHOLDER = 'https://hc-cdn.hel1.your-objectstorage.com/s/v3/b9fb3f59e871ae5c976d04995985101c5ee7cdb4_screenshot_2025-09-23_at_12.53.43___pm.png';

      const CDN_CONTENT = {
        hero: CDN_PLACEHOLDER,
        libraries: [
          // The first URL in each `images` array is used as the cover; the rest populate the gallery grid automatically.
          {
            slug: 'cars',
            title: 'Cars',
            images: [
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
            ],
          },
          {
            slug: 'sports',
            title: 'Sports',
            images: [
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
            ],
          },
          {
            slug: 'landscapes',
            title: 'Landscapes',
            images: [
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
            ],
          },
          {
            slug: 'abstract',
            title: 'Abstract',
            images: [
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
            ],
          },
          {
            slug: 'scenery',
            title: 'Scenery',
            images: [
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
            ],
          },
          {
            slug: 'client-work',
            title: 'Client Work',
            images: [
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
              CDN_PLACEHOLDER,
            ],
          },
        ],
      };

      function prepareLibraries(manifestLibraries){
        if(!Array.isArray(manifestLibraries) || !manifestLibraries.length){
          return DEFAULT_LIBS;
        }

        const normalized = manifestLibraries
          .map((lib) => {
            if(!lib || !lib.slug) return null;
            const images = Array.isArray(lib.images) ? lib.images.filter(Boolean) : [];
            const fallbackPhotos = Array.isArray(lib.photos) ? lib.photos.filter(Boolean) : [];
            const [coverFromImages, ...gridImages] = images;
            const cover = coverFromImages || lib.cover || fallbackPhotos[0] || '';
            const photos = gridImages.length
              ? gridImages
              : fallbackPhotos.filter((url, idx) => !(cover && idx === 0 && url === cover));

            return {
              slug: lib.slug,
              title: lib.title || lib.slug,
              cover,
              photos,
            };
          })
          .filter(Boolean);

        return normalized.length ? normalized : DEFAULT_LIBS;
      }

      const HERO_IMAGE = CDN_CONTENT.hero || '';
      const CDN_LIBRARIES = prepareLibraries(CDN_CONTENT.libraries);

      /* --------------------------------------------------
       * Helpers
       * -------------------------------------------------- */
      const SITE_TITLE = 'Arnav Asthana';
      const cx = (...xs) => xs.filter(Boolean).join(' ');

      function useRevealOnView(deps=[]){
        useEffect(() => {
          const io = new IntersectionObserver((entries) => {
            entries.forEach(e => {
              if(e.isIntersecting) e.target.classList.add('revealed');
              else e.target.classList.remove('revealed');
            });
          }, { threshold: 0.15 });
          document.querySelectorAll('.reveal-seq').forEach(el => io.observe(el));
          return () => io.disconnect();
        }, deps);
      }

      /* --------------------------------------------------
       * Components
       * -------------------------------------------------- */
      function SplitTitle({ text, onFinished, play }) {
        const letters = useMemo(() => text.split(''), [text]);
        const announcedRef = useRef(false);
        useEffect(() => {
          if(announcedRef.current) return;
          if(!play){
            announcedRef.current = true;
            onFinished && onFinished();
            return;
          }
          const total = letters.length * 55 + 700; // ms
          const t = setTimeout(() => {
            announcedRef.current = true;
            onFinished && onFinished();
          }, total);
          return () => clearTimeout(t);
        }, [letters.length, onFinished, play]);
        const nbsp = '\xa0';
        return (
          <h1 className="intro-heading text-[clamp(2.7rem,6vw,4.8rem)]">
            {letters.map((ch,i) => (
              <span
                key={i}
                className={cx('intro-letter', play ? 'play' : 'show')}
                style={play ? { animationDelay: `${i*55}ms` } : undefined}
              >
                {ch===' '?nbsp:ch}
              </span>
            ))}
          </h1>
        );
      }

      function TopNav({ visible, onNav }){
        const links = [
          { label:'Portfolio', href:'#libraries' },
          { label:'About',     href:'#about'     },
          { label:'Contact',   href:'#contact'   },
        ];
        return (
          <nav className={cx('fixed top-0 left-0 right-0 z-40 border-b border-neutral-800 backdrop-blur-md bg-black/25', visible?'fade-down':'opacity-0')}>
            <div className="mx-auto max-w-6xl px-4 h-14 flex items-center justify-between">
              <a href="#hero" className="text-neutral-200 hover:text-white btn" onClick={(e)=>{e.preventDefault(); onNav('#hero');}}>{SITE_TITLE}</a>
              <div className="flex items-center gap-2">
                {links.map(l => (
                  <a key={l.href} href={l.href} className="px-3 py-1.5 rounded-lg hover:bg-neutral-900 text-neutral-200 btn" onClick={(e)=>{e.preventDefault(); onNav(l.href);}}>{l.label}</a>
                ))}
              </div>
            </div>
          </nav>
        );
      }

      function Hero({ play, onIntroDone, hero }){
        const heroLayerClass = cx('hero-image-layer', play ? 'play' : 'show');
        const gradientClass = cx('hero-gradient', play ? 'play' : 'show');
        const subtitleClass = cx('intro-sub', play ? 'play' : 'show');
        const ctaClass = cx('intro-cta', play ? 'play' : 'show');

        const handleScroll = (e) => {
          e.preventDefault();
          document.getElementById('libraries')?.scrollIntoView({ behavior:'smooth', block:'start' });
        };

        return (
          <header className="hero-scene relative h-full w-full flex items-center justify-center">
            <div className="hero-inner">
              <div className="hero-visual">
                <div className={heroLayerClass} style={{ backgroundImage: hero?`url(${hero})`:'none', backgroundColor: hero?'transparent':'#111' }} />
                <div className={gradientClass} />
                <div className="hero-overlay" />
              </div>
              <SplitTitle text={SITE_TITLE} onFinished={onIntroDone} play={play} />
              <p className={subtitleClass}>{'Photography Portfolio'.toUpperCase()}</p>
              <a href="#libraries" className={ctaClass} onClick={handleScroll}>
                <span>View Work</span>
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <path d="M5 12h14M13 6l6 6-6 6" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
              </a>
            </div>
          </header>
        );
      }

      function LibrariesGrid({ libraries, onOpen }){
        return (
          <div className="text-center w-full max-w-screen-xl px-4 mx-auto">
            <h2 className="text-2xl md:text-3xl font-medium fade-down">Libraries</h2>
            <p className="text-neutral-400 mt-2 fade-up">Browse collections by subject or project.</p>

            {/* Always-centered rows */}
            <div className="mt-6 md:mt-10 flex flex-wrap justify-center gap-4 md:gap-6 reveal-seq">
              {libraries.map((lib,i) => (
                <button key={lib.slug} data-testid="lib-card" className="card rounded-2xl overflow-hidden text-center outline-none bg-neutral-900 w-[300px] sm:w-[340px] md:w-[380px]" onClick={()=> onOpen(lib.slug)}>
                  <div className="anim" style={{animationDelay:`${i*80}ms`}}>
                    <div className="img-wrap aspect-[16/9] w-full bg-neutral-800">
                      <img
                        src={lib.cover || ''}
                        alt={`${lib.title} cover`}
                        className="img"
                        referrerPolicy="no-referrer"
                        onError={(e)=>{ const wrap=e.currentTarget.parentElement; if(wrap) wrap.classList.add('failed'); e.currentTarget.src=''; console.warn('Cover failed:', lib.title, lib.cover); }}
                        onLoad={(e)=>{ const wrap=e.currentTarget.parentElement; if(wrap) wrap.classList.remove('failed'); }}
                      />
                    </div>
                    <div className="p-2 md:p-3">
                      <div className="text-neutral-100 text-sm md:text-base">{lib.title}</div>
                      <div className="text-neutral-400 text-[11px] md:text-xs">{lib.photos.length} photos</div>
                    </div>
                  </div>
                </button>
              ))}
            </div>
          </div>
        );
      }

      function LibraryPage({ lib, onBack }){
        const worksLabel = lib.photos.length === 1 ? 'work' : 'works';

        return (
          <main className="fade-in">
            <header className="library-hero bg-neutral-950">
              <div className="max-w-6xl mx-auto px-4 flex flex-col items-center text-center">
                <div className="library-hero-media" data-testid="library-hero">
                  <img
                    src={lib.cover || ''}
                    alt={`${lib.title} cover`}
                    referrerPolicy="no-referrer"
                    onError={(e)=>{ e.currentTarget.src=''; e.currentTarget.closest('.library-hero-media')?.classList.add('failed'); }}
                    onLoad={(e)=>{ e.currentTarget.closest('.library-hero-media')?.classList.remove('failed'); }}
                  />
                </div>
                <div className="library-hero-content">
                  <h1 className="text-white text-3xl md:text-4xl font-light fade-down">{lib.title}</h1>
                  <p className="text-neutral-300 mt-3 fade-up">{lib.photos.length} {worksLabel}</p>
                  <div className="mt-6">
                    <button className="text-neutral-200 hover:text-white btn underline decoration-neutral-700/80 hover:decoration-white/80" onClick={onBack}>← Back</button>
                  </div>
                </div>
              </div>
            </header>
            <section className="bg-neutral-950 text-center">
              <div className="max-w-6xl mx-auto px-4 py-16">
                <div className="gallery">
                  {lib.photos.length ? (
                    lib.photos.map((src,i) => (
                      <figure key={src} className="rounded-[16px] overflow-hidden border border-neutral-800 bg-neutral-900 p-3 flex flex-col items-center fade-up" style={{animationDelay:`${i*30}ms`}}>
                        <div className="img-wrap w-full bg-neutral-800" style={{aspectRatio:'4/3'}}>
                        <img
                          src={src || ''}
                          alt={`${lib.title} ${i+1}`}
                          className="img rounded-md"
                          referrerPolicy="no-referrer"
                          onError={(e)=>{ const wrap=e.currentTarget.parentElement; if(wrap) wrap.classList.add('failed'); e.currentTarget.src=''; console.warn('Photo failed:', lib.title, src); }}
                          onLoad={(e)=>{ const wrap=e.currentTarget.parentElement; if(wrap) wrap.classList.remove('failed'); }}
                        />
                      </div>
                        <figcaption className="text-center text-neutral-400 text-xs mt-2">{lib.title} — #{i+1}</figcaption>
                      </figure>
                    ))
                  ) : (
                    <div className="col-span-full flex flex-col items-center justify-center gap-3 text-neutral-400 bg-neutral-900/40 border border-dashed border-neutral-800 rounded-2xl py-12 px-6">
                      <div className="text-sm tracking-wide uppercase text-neutral-500">No additional photos yet</div>
                      <p className="max-w-md text-sm md:text-base text-neutral-400">Add more image URLs to this library’s manifest entry to populate the gallery grid. They’ll appear here instantly.</p>
                    </div>
                  )}
                </div>
              </div>
            </section>
          </main>
        );
      }

      function About(){
        return (
          <main className="mx-auto max-w-3xl px-4 py-28 text-center">
            <h2 className="text-2xl md:text-3xl font-medium fade-down">About</h2>
            <p className="text-neutral-400 mt-4 whitespace-pre-wrap min-h-[4em] fade-up">I’m {SITE_TITLE}, a photographer who loves capturing stories in landscapes, cities, and people. This site showcases selected work.</p>
          </main>
        );
      }

      function Contact(){
        return (
          <main className="mx-auto max-w-3xl px-4 py-28 text-center">
            <h2 className="text-2xl md:text-3xl font-medium fade-down">Contact</h2>
            <p className="text-neutral-400 mt-4 fade-up">Reach out for shoots, licensing, or collaborations.</p>
            <div className="mt-8 grid gap-3 justify-center reveal-seq">
              <div className="anim" style={{animationDelay:'.1s'}}>
                <div className="text-neutral-500 text-sm uppercase tracking-wider">Email</div>
                <div><a className="underline btn" href="mailto:hello@example.com">hello@example.com</a></div>
              </div>
              <div className="anim" style={{animationDelay:'.2s'}}>
                <div className="text-neutral-500 text-sm uppercase tracking-wider">Instagram</div>
                <div><a className="underline btn" href="#" target="_blank" rel="noreferrer">@yourhandle</a></div>
              </div>
              <div className="anim" style={{animationDelay:'.3s'}}>
                <div className="text-neutral-500 text-sm uppercase tracking-wider">Location</div>
                <div>Your City, Country</div>
              </div>
            </div>
          </main>
        );
      }

      /* --------------------------------------------------
       * App
       * -------------------------------------------------- */
      function App(){
        const [route, setRoute] = useState('home');
        const hero = HERO_IMAGE;
        const libraries = CDN_LIBRARIES;
        const [navVisible, setNavVisible] = useState(false);
        const [firstLoad, setFirstLoad] = useState(() => sessionStorage.getItem('heroPlayed') ? false : true);

        const heroRef = useRef(null), libsRef = useRef(null), aboutRef = useRef(null), contactRef = useRef(null);

        useRevealOnView([route]);

        const isLibRoute = route.startsWith('lib:');
        const currentLib = isLibRoute ? libraries.find(l => `lib:${l.slug}` === route) : null;

        const handleIntroDone = () => {
          setNavVisible(true);
          if(firstLoad){ setFirstLoad(false); sessionStorage.setItem('heroPlayed','1'); }
        };

        const scrollToHash = (hash) => {
          const map = { '#hero': heroRef, '#libraries': libsRef, '#about': aboutRef, '#contact': contactRef };
          const el = map[hash]?.current; if(el) el.scrollIntoView({ behavior:'smooth', block:'start' });
        };

        // smoke tests (non-fatal)
        useEffect(() => {
          console.assert(document.querySelector('nav'), 'Top nav should render');
          if(route==='home'){
            ['hero','libraries','about','contact'].forEach(id => console.assert(document.getElementById(id), `#${id} exists`));
            const cards = document.querySelectorAll('[data-testid="lib-card"]');
            console.assert(cards.length === libraries.length, `cards=${cards.length} libs=${libraries.length}`);
          }
        }, [route, libraries.length]);

        return (
          <div className="min-h-screen bg-neutral-950">
            {!isLibRoute && <TopNav visible={navVisible || !firstLoad} onNav={scrollToHash} />}

            {isLibRoute ? (
              currentLib ? (
                <LibraryPage lib={currentLib} onBack={() => setRoute('home')} />
              ) : (
                <main className="mx-auto max-w-3xl px-4 py-28 text-center text-neutral-300">Not found. <button className="btn underline" onClick={() => setRoute('home')}>Back</button></main>
              )
            ) : (
              <div className="snap-container">
                <section id="hero" ref={heroRef} className="h-screen flex items-center justify-center">
                  <Hero play={firstLoad} onIntroDone={handleIntroDone} hero={hero} />
                </section>
                <section id="libraries" ref={libsRef} className="min-h-screen flex items-center justify-center">
                  <div className="w-full" data-testid="libraries">
                    <div className="text-center w-full">
                      <LibrariesGrid libraries={libraries} onOpen={(slug) => setRoute(`lib:${slug}`)} />
                    </div>
                  </div>
                </section>
                <section id="about" ref={aboutRef} className="min-h-screen flex items-center justify-center"><About /></section>
                <section id="contact" ref={contactRef} className="min-h-screen flex items-center justify-center"><Contact /></section>
              </div>
            )}
          </div>
        );
      }

      // Mount app (with a guard to surface errors visibly if anything breaks)
      try{
        ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
      }catch(err){
        const pre = document.createElement('pre');
        pre.style.position='fixed'; pre.style.inset='0'; pre.style.background='#0a0a0a'; pre.style.color='#f8fafc';
        pre.style.padding='24px'; pre.style.margin='0'; pre.style.zIndex='99999'; pre.style.whiteSpace='pre-wrap';
        pre.textContent = 'Something went wrong booting the page.\n' + (err && err.message ? err.message : String(err));
        document.body.appendChild(pre);
      }
    </script>
  </body>
</html>
